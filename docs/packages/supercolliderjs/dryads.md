# dryads
Package: <a href="#/packages/supercolliderjs/api">supercolliderjs</a>

<div class="Index"><h4 id="@supercollider/dryads">@supercollider/dryads</h4><ul class="no-dot"><li><div class="entity-box"><div class="Class"><h3 class="class-header" id="AudioBus"><span class="token keyword">class</span> <span class="class">AudioBus</span></h3><span class="token keyword">extends</span> <span class="type reference">Dryad&lt;<span class="type reference">Properties</span>&gt;</span><p class="short-text">Allocates an audio bus, making it available in the children's context as .out (integer)
and .numChannels (integer)</p><div class="section-heading">Constructor</div><div class="class-member"></div><div class="section-heading">Property</div><div class="class-member"><h4 id="children"><span class="token property">children</span> <span class="type ">[object Object]</span>[]</h4></div><div class="class-member"><h4 id="properties"><span class="token property">properties</span> <span class="type reference">Properties</span></h4></div><div class="section-heading">Accessor</div><div class="class-member"><h4 id="isDryad"><span class="token property">isDryad</span> <span class="type token entity">boolean</span></h4><p class="short-text">This method is never actually called, but merely because its implemented
(dryad.isDryad is not undefined) it marks the things as being a Dryad.</p></div><div class="section-heading">Method</div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="defaultProperties"><span class="token function">defaultProperties</span>(): <span class="type reference">Properties</span></h4></div><div class="class-member"></div><div class="class-member"><h4 id="prepareForAdd"><span class="token function">prepareForAdd</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"><h4 id="remove"><span class="token function">remove</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"><h4 id="requireParent"><span class="token function">requireParent</span>(): <span class="type token entity">string</span></h4><p class="short-text">If there is no SCServer in the parent context,
then this will wrap itself in an SCServer</p></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div></div></div></li><li><div class="entity-box"><div class="Class"><h3 class="class-header" id="Group"><span class="token keyword">class</span> <span class="class">Group</span></h3><span class="token keyword">extends</span> <span class="type reference">Dryad</span><p class="short-text">Creates a group on the server; sets .group in context for its children,
so any Synths or Groups will be spawned inside this group.</p><div class="section-heading">Constructor</div><div class="class-member"></div><div class="section-heading">Property</div><div class="class-member"><h4 id="children"><span class="token property">children</span> <span class="type ">[object Object]</span>[]</h4></div><div class="class-member"><h4 id="properties"><span class="token property">properties</span> P</h4></div><div class="section-heading">Accessor</div><div class="class-member"><h4 id="isDryad"><span class="token property">isDryad</span> <span class="type token entity">boolean</span></h4><p class="short-text">This method is never actually called, but merely because its implemented
(dryad.isDryad is not undefined) it marks the things as being a Dryad.</p></div><div class="section-heading">Method</div><div class="class-member"><h4 id="add"><span class="token function">add</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="prepareForAdd"><span class="token function">prepareForAdd</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"><h4 id="remove"><span class="token function">remove</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"><h4 id="requireParent"><span class="token function">requireParent</span>(): <span class="type token entity">string</span></h4><p class="short-text">If there is no SCServer in the parent context,
then this will wrap itself in an SCServer</p></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div></div></div></li><li><div class="entity-box"><div class="Class"><h3 class="class-header" id="SCLang"><span class="token keyword">class</span> <span class="class">SCLang</span></h3><span class="token keyword">extends</span> <span class="type reference">Dryad&lt;<span class="type reference">Properties</span>&gt;</span><p class="short-text">Boots a new SuperCollider language interpreter (sclang) making it available for all children as context.sclang</p><p class="">Always boots a new one, ignoring any possibly already existing one in the parent context.

`options` are the command line options supplied to sclang (note: not all options are passed through yet)
see {@link lang/SCLang}

Not to be confused with the other class named SCLang which does all the hard work.
This Dryad class is just a simple wrapper around that.
</p><div class="section-heading">Constructor</div><div class="class-member"></div><div class="section-heading">Property</div><div class="class-member"><h4 id="children"><span class="token property">children</span> <span class="type ">[object Object]</span>[]</h4></div><div class="class-member"><h4 id="properties"><span class="token property">properties</span> <span class="type reference">Properties</span></h4></div><div class="section-heading">Accessor</div><div class="class-member"><h4 id="isDryad"><span class="token property">isDryad</span> <span class="type token entity">boolean</span></h4><p class="short-text">This method is never actually called, but merely because its implemented
(dryad.isDryad is not undefined) it marks the things as being a Dryad.</p></div><div class="section-heading">Method</div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="defaultProperties"><span class="token function">defaultProperties</span>(): <span class="type reference">Properties</span></h4></div><div class="class-member"></div><div class="class-member"><h4 id="prepareForAdd"><span class="token function">prepareForAdd</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"><h4 id="remove"><span class="token function">remove</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div></div></div></li><li><div class="entity-box"><div class="Class"><h3 class="class-header" id="SCServer"><span class="token keyword">class</span> <span class="class">SCServer</span></h3><span class="token keyword">extends</span> <span class="type reference">Dryad&lt;<span class="type reference">ServerProperties</span>&gt;</span><p class="short-text">Boots a new SuperCollider server (scsynth) making it available for all children as `context.scserver`</p><p class="">Always boots a new one, ignoring any possibly already existing one in the parent context.

`options` are the command line options supplied to scsynth (note: not all options are passed through yet)
see {@link Server}
</p><div class="section-heading">Constructor</div><div class="class-member"></div><div class="section-heading">Property</div><div class="class-member"><h4 id="children"><span class="token property">children</span> <span class="type ">[object Object]</span>[]</h4></div><div class="class-member"><h4 id="properties"><span class="token property">properties</span> <span class="type reference">ServerProperties</span></h4></div><div class="section-heading">Accessor</div><div class="class-member"><h4 id="isDryad"><span class="token property">isDryad</span> <span class="type token entity">boolean</span></h4><p class="short-text">This method is never actually called, but merely because its implemented
(dryad.isDryad is not undefined) it marks the things as being a Dryad.</p></div><div class="section-heading">Method</div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="defaultProperties"><span class="token function">defaultProperties</span>(): <span class="type reference">ServerProperties</span></h4></div><div class="class-member"><h4 id="initialContext"><span class="token function">initialContext</span>(): <span class="type reference">Context</span></h4></div><div class="class-member"><h4 id="prepareForAdd"><span class="token function">prepareForAdd</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"><h4 id="remove"><span class="token function">remove</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div></div></div></li><li><div class="module"><span class="token keyword">module</span> SCSynthDef<div class="module-child entity-box"><div class="Class"><h3 class="class-header" id="SCSynthDef"><span class="token keyword">class</span> <span class="class">SCSynthDef</span></h3><span class="token keyword">extends</span> <span class="type reference">Dryad&lt;<span class="type reference">Properties</span>&gt;</span><p class="short-text">Compile a SynthDef from sclang source code
or load a precompiled .scsyndef</p><p class="">If compilation is required then it will insert SCLang as a parent if necessary.

Note that the synthDefName is not known until after the source code is compiled.
</p><div class="section-heading">Constructor</div><div class="class-member"></div><div class="section-heading">Property</div><div class="class-member"><h4 id="children"><span class="token property">children</span> <span class="type ">[object Object]</span>[]</h4></div><div class="class-member"><h4 id="properties"><span class="token property">properties</span> <span class="type reference">Properties</span></h4></div><div class="section-heading">Accessor</div><div class="class-member"><h4 id="isDryad"><span class="token property">isDryad</span> <span class="type token entity">boolean</span></h4><p class="short-text">This method is never actually called, but merely because its implemented
(dryad.isDryad is not undefined) it marks the things as being a Dryad.</p></div><div class="section-heading">Method</div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="add"><span class="token function">add</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="compileSource"><span class="token function">compileSource</span>(<span class="nowrap">context: <span class="type reference">Context</span></span>, <span class="nowrap">sourceCode: <span class="type token entity">string</span></span>, <span class="nowrap">pathName: <span class="type "><span class="type token entity">undefined</span> | <span class="type token entity">string</span></span></span>): <span class="type reference">Promise&lt;<span class="type reference">CompiledSynthDef</span>&gt;</span></h4><p class="short-text">Returns a Promise for a SynthDef result object: name, bytes, synthDesc</p></div><div class="class-member"><h4 id="defaultProperties"><span class="token function">defaultProperties</span>(): <span class="type reference">Properties</span></h4></div><div class="class-member"></div><div class="class-member"><h4 id="prepareForAdd"><span class="token function">prepareForAdd</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"></div><div class="class-member"><h4 id="remove"><span class="token function">remove</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"><h4 id="requireParent"><span class="token function">requireParent</span>(): <span class="type "><span class="type token entity">string</span> | <span class="type token entity">void</span></span></h4><p class="short-text">If there is no SCLang in the parent context,
then this will wrap itself in an SCLang (language interpreter).</p></div><div class="class-member"></div><div class="class-member"><h4 id="value"><span class="token function">value</span>(<span class="nowrap">context: <span class="type reference">Context</span></span>): <span class="type reference">SynthDef</span></h4><p class="short-text">Return the value of this object, which is the synthDef: {name, bytes, synthDesc}
for use in /s_new.</p></div><div class="class-member"><h4 id="fromFile"><span class="token function">fromFile</span>(<span class="nowrap">path: <span class="type token entity">string</span></span>): <span class="type reference">SCSynthDef</span></h4></div><div class="class-member"><h4 id="fromSource"><span class="token function">fromSource</span>(<span class="nowrap">source: <span class="type token entity">string</span></span>): <span class="type reference">SCSynthDef</span></h4></div><div class="class-member"></div></div></div><div class="module-child entity-box"><div class="Interface"><h4 id="CompiledSynthDef"><span class="token keyword">interface</span> CompiledSynthDef</h4><ul class="no-dot"><li><h4 id="bytes"><span class="token property">bytes</span> <span class="type reference">Buffer</span></h4></li><li><h4 id="name"><span class="token property">name</span> <span class="type token entity">string</span></h4></li><li><h4 id="synthDesc"><span class="token property">synthDesc</span> <span class="type reference">SynthDesc</span></h4></li></ul></div></div><div class="module-child entity-box"><div class="Interface"><h4 id="LoadedSynthDef"><span class="token keyword">interface</span> LoadedSynthDef</h4><ul class="no-dot"><li><h4 id="name"><span class="token property">name</span> <span class="type token entity">string</span></h4></li></ul></div></div><div class="module-child entity-box"><div class="TypeAlias"><span class="token keyword">type</span> SynthDef = <span class="type "><span class="type reference">CompiledSynthDef</span> | <span class="type reference">LoadedSynthDef</span></span>;</div></div><div class="module-child entity-box"><div class="TypeAlias"><span class="token keyword">type</span> SynthDesc = <span class="type token entity">object</span>;</div></div></div></li><li><div class="entity-box"><div class="Class"><h3 class="class-header" id="Synth"><span class="token keyword">class</span> <span class="class">Synth</span></h3><span class="token keyword">extends</span> <span class="type reference">Dryad&lt;<span class="type reference">Properties</span>&gt;</span><p class="short-text">Creates a synth on the server.</p><p class="">Properties:
- def
- args
</p><div class="section-heading">Constructor</div><div class="class-member"></div><div class="section-heading">Property</div><div class="class-member"><h4 id="children"><span class="token property">children</span> <span class="type ">[object Object]</span>[]</h4></div><div class="class-member"><h4 id="properties"><span class="token property">properties</span> <span class="type reference">Properties</span></h4></div><div class="section-heading">Accessor</div><div class="class-member"><h4 id="isDryad"><span class="token property">isDryad</span> <span class="type token entity">boolean</span></h4><p class="short-text">This method is never actually called, but merely because its implemented
(dryad.isDryad is not undefined) it marks the things as being a Dryad.</p></div><div class="section-heading">Method</div><div class="class-member"></div><div class="class-member"><h4 id="add"><span class="token function">add</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="prepareForAdd"><span class="token function">prepareForAdd</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"><h4 id="remove"><span class="token function">remove</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"><h4 id="requireParent"><span class="token function">requireParent</span>(): <span class="type token entity">string</span></h4><p class="short-text">If there is no SCServer in the parent context,
then this will wrap itself in an SCServer</p></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="fromFile"><span class="token function">fromFile</span>(<span class="nowrap">path: <span class="type token entity">string</span></span>, <span class="nowrap">args: <span class="type reference">SynthParams</span> =  {}</span>): <span class="type reference">Synth</span></h4><p class="short-text">Make a Synth that will play the SynthDef compiled from an *.scd source code file</p></div><div class="class-member"><h4 id="fromSource"><span class="token function">fromSource</span>(<span class="nowrap">source: <span class="type token entity">string</span></span>, <span class="nowrap">args: <span class="type reference">SynthParams</span> =  {}</span>): <span class="type reference">Synth</span></h4><p class="short-text">Make a Synth that will play the SynthDef compiled from sclang source code.</p><p class="">source may be fully defined:
  `SynthDef("defName", { |out=0, freq=440| Out.ar(SinOsc.ar(freq)) });`
or more simply:
  `{|freq| SinOsc.ar(freq)}`
or even just:
   `|freq| SinOsc.ar(freq)`
</p></div><div class="class-member"></div></div></div></li><li><div class="entity-box"><div class="Class"><h3 class="class-header" id="SynthControl"><span class="token keyword">class</span> <span class="class">SynthControl</span></h3><span class="token keyword">extends</span> <span class="type reference">Dryad&lt;<span class="type reference">Properties</span>&gt;</span><p class="short-text">Sends nodeSet messages to the Synth in the parent context.</p><p class="">This takes a Bacon.js stream which should return objects
{param: value, ...} and sends `nodeSet` messages to the parent Synth.

SynthControl should be a child of a Synth, Group or other Dryad that
sets context.nodeID
</p><div class="section-heading">Constructor</div><div class="class-member"></div><div class="section-heading">Property</div><div class="class-member"><h4 id="children"><span class="token property">children</span> <span class="type ">[object Object]</span>[]</h4></div><div class="class-member"><h4 id="properties"><span class="token property">properties</span> <span class="type reference">Properties</span></h4></div><div class="section-heading">Accessor</div><div class="class-member"><h4 id="isDryad"><span class="token property">isDryad</span> <span class="type token entity">boolean</span></h4><p class="short-text">This method is never actually called, but merely because its implemented
(dryad.isDryad is not undefined) it marks the things as being a Dryad.</p></div><div class="section-heading">Method</div><div class="class-member"><h4 id="add"><span class="token function">add</span>(<span class="nowrap">player: <span class="type reference">DryadPlayer</span></span>): <span class="type reference">Command</span></h4></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="remove"><span class="token function">remove</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"><h4 id="requireParent"><span class="token function">requireParent</span>(): <span class="type token entity">string</span></h4><p class="short-text">If there is no SCServer in the parent context,
then this will wrap itself in an SCServer</p></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div></div></div></li><li><div class="entity-box"><div class="Class"><h3 class="class-header" id="SynthEventList"><span class="token keyword">class</span> <span class="class">SynthEventList</span></h3><span class="token keyword">extends</span> <span class="type reference">Dryad&lt;<span class="type reference">Properties</span>&gt;</span><p class="short-text">Takes a list of synth event objects with relative times and schedules them.</p><p class="">#### properties

__events:__ Array

The event values should be simple JavaScript objects:

    {
      defName: 'synthDefName',
      args: {
        out: 0,
        freq: 440
      },
      time: 0.3
    }

 Where time is seconds relative to the epoch. The epoch is the start time of
 the dryadic tree, unless a parent Dryad has set a new epoch into context.

   epoch: number|Date|undefined
     Optional epoch that the event times in the list are relative to.
     Can also be updated by the updateStream
     default: context.epoch or now

__updateStream:__ Bacon stream to push updated event lists of the form:

     {
       events: [{time: msgs: []}...],
       epoch: 123456789
     }

    .events Array
    .epoch  number|Date

Deprecated: will be replaced with live updating and setting of
Any value in a dryadic document from the player or remote client.

Pushing a new event list cancels previous events and schedules new events.

Note that by default the epoch will be unchanged: relative times
are still relative to when the Dryad tree started playing or when any parent
Dryad set an epoch in context. This means you update the currently playing score
but it doesn't restart from the beginning, it keeps playing.

Optionally you may push an .epoch with the updateStream. This can be a date or timestamp
slightly in the future. If you pass "now" then any events at `0.0` will be too late to play.

__defaultParams:__ a fixed object into which the event value is merged.

__loopTime:__ Play the events continuously in a loop.
</p><div class="section-heading">Constructor</div><div class="class-member"></div><div class="section-heading">Property</div><div class="class-member"><h4 id="children"><span class="token property">children</span> <span class="type ">[object Object]</span>[]</h4></div><div class="class-member"><h4 id="properties"><span class="token property">properties</span> <span class="type reference">Properties</span></h4></div><div class="section-heading">Accessor</div><div class="class-member"><h4 id="isDryad"><span class="token property">isDryad</span> <span class="type token entity">boolean</span></h4><p class="short-text">This method is never actually called, but merely because its implemented
(dryad.isDryad is not undefined) it marks the things as being a Dryad.</p></div><div class="section-heading">Method</div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="add"><span class="token function">add</span>(<span class="nowrap">player: <span class="type reference">DryadPlayer</span></span>): <span class="type reference">AddCommand</span></h4></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="defaultProperties"><span class="token function">defaultProperties</span>(): <span class="type reference">Properties</span></h4></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="remove"><span class="token function">remove</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"></div><div class="class-member"><h4 id="subgraph"><span class="token function">subgraph</span>(): <span class="type reference">Dryad</span></h4><div class="">Returns Wraps itself in a Group so all child Synth events will be removed on removal of the Group.</div></div><div class="class-member"></div><div class="class-member"></div></div></div></li><li><div class="module"><span class="token keyword">module</span> SynthStream<div class="module-child entity-box"><div class="Class"><h3 class="class-header" id="SynthStream"><span class="token keyword">class</span> <span class="class">SynthStream</span></h3><span class="token keyword">extends</span> <span class="type reference">Dryad&lt;<span class="type reference">Properties</span>&gt;</span><p class="short-text">Given a Bacon.js stream that returns objects, this spawns a series of Synths.</p><p class="">Properties:
 {Bacon.EventStream} stream
 {object} defaultParams

The event values should be simple JavaScript objects:

{
  defName: 'synthDefName',
  args: {
    out: 0,
    freq: 440
  }
}

defaultParams is a fixed object into which the event value is merged.
</p><div class="section-heading">Constructor</div><div class="class-member"></div><div class="section-heading">Property</div><div class="class-member"><h4 id="children"><span class="token property">children</span> <span class="type ">[object Object]</span>[]</h4></div><div class="class-member"><h4 id="properties"><span class="token property">properties</span> <span class="type reference">Properties</span></h4></div><div class="section-heading">Accessor</div><div class="class-member"><h4 id="isDryad"><span class="token property">isDryad</span> <span class="type token entity">boolean</span></h4><p class="short-text">This method is never actually called, but merely because its implemented
(dryad.isDryad is not undefined) it marks the things as being a Dryad.</p></div><div class="section-heading">Method</div><div class="class-member"><h4 id="add"><span class="token function">add</span>(<span class="nowrap">player: <span class="type reference">DryadPlayer</span></span>): <span class="type reference">Command</span></h4></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="commandsForEvent"><span class="token function">commandsForEvent</span>(<span class="nowrap">event: <span class="type reference">Event</span></span>, <span class="nowrap">context: <span class="type reference">Context</span></span>, <span class="nowrap">properties: <span class="type reference">Properties</span></span>): <span class="type reference">SynthStreamEventCommand</span></h4></div><div class="class-member"></div><div class="class-member"><h4 id="handleEvent"><span class="token function">handleEvent</span>(<span class="nowrap">event: <span class="type reference">Event</span></span>, <span class="nowrap">context: <span class="type reference">Context</span></span>, <span class="nowrap">properties: <span class="type reference">Properties</span></span>, <span class="nowrap">player: <span class="type reference">DryadPlayer</span></span>): <span class="type token entity">void</span></h4></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="remove"><span class="token function">remove</span>(): <span class="type reference">Command</span></h4></div><div class="class-member"></div><div class="class-member"><h4 id="subgraph"><span class="token function">subgraph</span>(): <span class="type reference">Dryad</span></h4></div><div class="class-member"></div><div class="class-member"></div></div></div><div class="module-child entity-box"><div class="Interface"><h4 id="Event"><span class="token keyword">interface</span> Event</h4><ul class="no-dot"><li><h4 id="args"><span class="token property">args</span> <span class="type reference">Params</span></h4></li><li><h4 id="defName"><span class="token property">defName</span> <span class="type token entity">string</span></h4></li><li><h4 id="key"><span class="token property">key</span> <span class="type "><span class="type token entity">undefined</span> | <span class="type token entity">number</span></span></h4></li><li><h4 id="type"><span class="token property">type</span> <span class="type "><span class="type token entity">undefined</span> | <span class="type token entity">string</span></span></h4></li></ul></div></div></div></li><li></li><li></li><li></li><li></li><li><div class="module"><span class="token keyword">module</span> index<div class="module-child entity-box"><div class="Interface"><h4 id="Context"><span class="token keyword">interface</span> Context</h4><ul class="no-dot"></ul></div></div><div class="module-child entity-box"><h4 id="dryadic"><span class="token function">dryadic</span>(<span class="nowrap">rootDryad: <span class="type reference">Dryad</span></span>, <span class="nowrap">moreLayers: <span class="type ">[object Object]</span>[] =  []</span>, <span class="nowrap">rootContext: <span class="type reference">Context</span> =  {}</span>): <span class="type reference">DryadPlayer</span></h4><p class="short-text">Create a DryadPlayer from a Dryad or hyperscript definition.</p><p class="">Automatically includes the supercollider.js layer

usage:
```js
  var sc = require('supercolliderjs');
  var player = sc.dryadic([
    'scserver', [
      ['group', [
        ['synth', {
          defName: 'sinosc',
          args: {
            freq: 440
          }
        }]
      ]
  ]);
  player.play();
  // ...
  player.stop();
```
</p></div><div class="module-child entity-box"><h4 id="h"><span class="token function">h</span>(<span class="nowrap">hgraph: <span class="type token entity">any</span></span>): <span class="type reference">Dryad</span></h4><p class="short-text">Convert hyperscript object to a tree of Dryads.</p><p class="">This lookups each class by lower class 'classname'
and creates an instance with properties and children.
</p></div><div class="module-child entity-box"><h4 id="play"><span class="token function">play</span>(<span class="nowrap">rootDryad: <span class="type reference">Dryad</span></span>): <span class="type reference">Promise&lt;<span class="type reference">DryadPlayer</span>&gt;</span></h4><p class="short-text">Play a Dryad or hyperscript document.</p><p class="">usage:

```js
  var sc = require('supercolliderjs');
  var player = sc.play([
    'scserver', [
      ['group', [
        ['synth', {
          defName: 'sinosc',
          args: {
            freq: 440
          }
        }]
      ]
  ]);
```</p></div><div class="module-child entity-box"><h4 id=""><span class="token variable">layer</span> = {</h4><ul class="no-dot"><li><span class="token property">classes</span> : <span class="type ">[object Object]</span>[] =</li><li><span class="token property">middleware</span> : <span class="type ">[object Object]</span>[] =</li></ul>}</div></div></li><li><div class="module"><span class="token keyword">module</span> middleware/OSCSched<div class="module-child entity-box"><div class="Class"><h3 class="class-header" id="OSCSched"><span class="token keyword">class</span> <span class="class">OSCSched</span></h3><p class="short-text">Just in time osc scheduler used by scserver middleware
to send OSC messages.</p><p class="">This is used by the scserver middleware.

It is used by calling `.schedLoop(getNext, epoch)`
</p><div class="section-heading">Constructor</div><div class="class-member"><h4 id="constructor"><span class="token function">new OSCSched</span>(<span class="nowrap">sendFn: <span class="type reference">Function</span></span>, <span class="nowrap">latency: <span class="type token entity">number</span> = 0.05</span>, <span class="nowrap">setTimeoutFn: <span class="type reference">Function</span> =  setTimeout</span>, <span class="nowrap">clearTimeoutFn: <span class="type reference">Function</span> =  clearTimeout</span>): <span class="type reference">OSCSched</span></h4><p class="short-text">constructor -</p></div><div class="section-heading">Property</div><div class="class-member"><h4 id="clearTimeout"><span class="token property">clearTimeout</span> <span class="type reference">Function</span></h4></div><div class="class-member"><h4 id="epoch"><span class="token property">epoch</span> <span class="type token entity">number</span></h4></div><div class="class-member"><h4 id="getNextFn"><span class="token property">getNextFn</span> <span class="type reference">GetNextFn</span></h4></div><div class="class-member"><h4 id="latency"><span class="token property">latency</span> <span class="type token entity">number</span></h4></div><div class="class-member"><h4 id="sendFn"><span class="token property">sendFn</span> <span class="type reference">Function</span></h4></div><div class="class-member"><h4 id="setTimeout"><span class="token property">setTimeout</span> <span class="type reference">Function</span></h4></div><div class="class-member"><h4 id="timerId"><span class="token property">timerId</span> <span class="type "><span class="type token entity">undefined</span> | <span class="type token entity">number</span></span></h4></div><div class="section-heading">Method</div><div class="class-member"><h4 id="_jitSend"><span class="token function">_jitSend</span>(<span class="nowrap">now: <span class="type token entity">number</span></span>, <span class="nowrap">delta: <span class="type token entity">number</span></span>, <span class="nowrap">next: <span class="type reference">Next</span></span>): <span class="type token entity">void</span></h4><p class="short-text">_jitSend - schedule to send the event just before it should play on the server.</p><p class="">Cancels any previously scheduled event.
</p></div><div class="class-member"><h4 id="_schedNext"><span class="token function">_schedNext</span>(<span class="nowrap">memo: <span class="type reference">Memo</span></span>, <span class="nowrap">logicalNow: <span class="type "><span class="type token entity">undefined</span> | <span class="type token entity">number</span></span></span>): <span class="type token entity">void</span></h4></div><div class="class-member"><h4 id="_send"><span class="token function">_send</span>(<span class="nowrap">event: <span class="type reference">OSCEvent</span></span>): <span class="type token entity">void</span></h4><p class="short-text">_send - send the OSC bundle</p></div><div class="class-member"><h4 id="schedLoop"><span class="token function">schedLoop</span>(<span class="nowrap">getNextFn: <span class="type reference">GetNextFn</span></span>, <span class="nowrap">epoch: <span class="type "><span class="type token entity">undefined</span> | <span class="type token entity">number</span></span></span>): <span class="type token entity">void</span></h4><p class="short-text">schedLoop - start a loop that gets the next event and schedules it to be sent</p></div></div></div><div class="module-child entity-box"><div class="Interface"><h4 id="OSCEvent"><span class="token keyword">interface</span> OSCEvent</h4><ul class="no-dot"><li><h4 id="msgs"><span class="token property">msgs</span> <span class="type ">[object Object]</span>[]</h4></li><li><h4 id="time"><span class="token property">time</span> <span class="type token entity">number</span></h4></li></ul></div></div></div></li><li></li><li></li><li><div class="module"><span class="token keyword">module</span> middleware/scserver<div class="module-child entity-box"><h4 id="resolveFuncs"><span class="token function">resolveFuncs</span>(<span class="nowrap">command: <span class="type reference">Command</span></span>, <span class="nowrap">context: <span class="type reference">Context</span></span>, <span class="nowrap">properties: <span class="type reference">Properties</span></span>): <span class="type reference">Command</span></h4><p class="short-text">Replace any functions in the command object's values with the result of
calling the function.</p><p class="">eg. msg: (context) => { ... return ['/s_new', ...]; }
becomes msg: ['/s_new', ...]

Non-functions are passed through.
</p></div><div class="module-child entity-box"><h4 id="scserver"><span class="token function">scserver</span>(<span class="nowrap">command: <span class="type reference">ServerCommand</span></span>, <span class="nowrap">context: <span class="type reference">Context</span></span>, <span class="nowrap">properties: <span class="type reference">Properties</span></span>, <span class="nowrap">updateContext: <span class="type reference">UpdateContext</span></span>): <span class="type reference">Promise&lt;<span class="type token entity">void</span>&gt;</span></h4><p class="short-text">Command middlware that sends OSC to the SuperCollider server (scsynth).</p><p class="">Command objects are collected from each Dryad (`add()` `remove()`) and
this middlware is called for each Dryad that has `scserver` commands.
</p></div></div></li><li></li><li><div class="module"><span class="token keyword">module</span> utils/iterators<div class="module-child entity-box"><div class="Interface"><h4 id="Event"><span class="token keyword">interface</span> Event</h4><ul class="no-dot"><li><h4 id="time"><span class="token property">time</span> <span class="type token entity">number</span></h4></li></ul></div></div><div class="module-child entity-box"><h4 id="clipTime"><span class="token function">clipTime</span>(<span class="nowrap">events: <span class="type ">[object Object]</span>[]</span>, <span class="nowrap">start: <span class="type token entity">number</span></span>, <span class="nowrap">end: <span class="type token entity">number</span></span>): <span class="type ">[object Object]</span>[]</h4></div><div class="module-child entity-box"><h4 id="eventListIterator"><span class="token function">eventListIterator</span>(<span class="nowrap">events: <span class="type ">[object Object]</span>[]</span>): <span class="type reference">Function</span></h4><p class="short-text">eventListIterator - Creates a function for use in a getNextEvent iterator that returns events sequentially</p><div class="">Returns arguments:
                         {number} now - in seconds,
                         {object} memo - used internally
                         If memo is not supplied then it will search for the next event
                         greater than or equal to 'now'
                         and if memo IS supplied then it iterates over the sorted event list.
                        returns {object} event - Which has .event (the original event) and .memo which is
                             used by OSCSched the next time this function is called.</div></div><div class="module-child entity-box"><h4 id="loopedEventListIterator"><span class="token function">loopedEventListIterator</span>(<span class="nowrap">events: <span class="type ">[object Object]</span>[]</span>, <span class="nowrap">loopTime: <span class="type token entity">number</span></span>): <span class="type reference">Function</span></h4><p class="short-text">loopedEventListIterator - Creates a function for use in a getNextEvent iterator that loops over an event list</p><div class="">Returns arguments:

  {number} now - in seconds,
  {object} memo - used internally
  If memo is not supplied then it will search for the next event
  greater than or equal to 'now'
  and if memo *is* supplied then it iterates over the sorted event list.

  returns {object} item - Which has .event (the original event) and .memo which is
                             used by OSCSched the next time this function is called.</div></div><div class="module-child entity-box"><h4 id="sortEvents"><span class="token function">sortEvents</span>(<span class="nowrap">events: <span class="type ">[object Object]</span>[]</span>): <span class="type ">[object Object]</span>[]</h4></div></div></li><li><div class="module"><span class="token keyword">module</span> utils/test-utils<div class="module-child entity-box"><h4 id="expectPlayGraphToEqual"><span class="token function">expectPlayGraphToEqual</span>(<span class="nowrap">dryad: <span class="type reference">Dryad</span></span>, <span class="nowrap">expected: <span class="type reference">JSONType</span></span>, <span class="nowrap">ignoreFn: <span class="type reference">Function</span></span>): <span class="type reference">JSONType</span></h4></div><div class="module-child entity-box"><h4 id="getCommand"><span class="token function">getCommand</span>(<span class="nowrap">player: <span class="type reference">DryadPlayer</span></span>, <span class="nowrap">commandName: <span class="type token entity">string</span></span>, <span class="nowrap">childAt: <span class="type ">[object Object]</span>[] =  []</span>): <span class="type token entity">object</span></h4><p class="short-text">Get a command object to inspect it for testing.
Calls any function in scserver msg/bundle so the result
will be the actual OSC message/bundle.</p><div class="">Returns Command object</div></div><div class="module-child entity-box"><h4 id="makePlayer"><span class="token function">makePlayer</span>(<span class="nowrap">dryad: <span class="type reference">Dryad</span></span>): <span class="type reference">DryadPlayer</span></h4></div></div></li></ul></div>
