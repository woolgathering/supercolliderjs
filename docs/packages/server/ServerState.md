# ServerState
Package: <a href="#/packages/server/api">@supercollider/server</a>

<div class="entity-box"><div class="Class"><h3 class="class-header" id="ServerState"><span class="token keyword">class</span> <span class="class">ServerState</span></h3><p class="short-text">Holds state for a Server and allocates node/bus/buffer ids,
stores node status and a record of compiled SynthDefs.</p><p class="">Server has this has as the property: server.state

Many of these functions are low-level accessors and allocators
useful for building higher-level applications that are easier
to use.

Each server is stored by its unique address,
so multiple Servers can store state in the same
global Store object.
</p><div class="section-heading">Constructor</div><div class="class-member"><h4 id="constructor"><span class="token function">new ServerState</span>(<span class="nowrap">server: <span class="type reference">Server</span></span>, <span class="nowrap">store: <span class="type reference">Store</span></span>): <span class="type reference">ServerState</span></h4></div><div class="section-heading">Property</div><div class="class-member"><h4 id="server"><span class="token property">server</span> <span class="type reference">Server</span></h4></div><div class="class-member"><h4 id="store"><span class="token property">store</span> <span class="type reference">Store</span></h4></div><div class="section-heading">Method</div><div class="class-member"></div><div class="class-member"></div><div class="class-member"></div><div class="class-member"><h4 id="allocAudioBus"><span class="token function">allocAudioBus</span>(<span class="nowrap">numChannels: <span class="type token entity">number</span> = 1</span>): <span class="type token entity">number</span></h4><p class="short-text">Allocate an audio bus and return it's id.</p><p class="">A bus may have many channels (stereo or more) in which case allocating reserves `numChannels` contigious busses.
It returns the id of the first bus.
</p></div><div class="class-member"><h4 id="allocBufferID"><span class="token function">allocBufferID</span>(<span class="nowrap">numConsecutive: <span class="type token entity">number</span> = 1</span>): <span class="type token entity">number</span></h4><p class="short-text">Allocate a buffer id.</p><p class="">Note that numChannels is specified when creating the buffer.
This allocator makes sure that the neighboring buffers are empty.
</p><div class="">Returns buffer id</div></div><div class="class-member"><h4 id="allocControlBus"><span class="token function">allocControlBus</span>(<span class="nowrap">numChannels: <span class="type token entity">number</span> = 1</span>): <span class="type token entity">number</span></h4><p class="short-text">Allocate a control bus and return it's id.</p><p class="">A bus may have many channels (stereo or more) in which case allocating reserves `numChannels` contigious busses.
</p></div><div class="class-member"><h4 id="freeAudioBus"><span class="token function">freeAudioBus</span>(<span class="nowrap">index: <span class="type token entity">number</span></span>, <span class="nowrap">numChannels: <span class="type token entity">number</span></span>): <span class="type token entity">void</span></h4><p class="short-text">Free a previously allocate audio bus</p><p class="">These require you to remember the channels and it messes it up
if you free it wrong. will change to higher level storage.
</p></div><div class="class-member"><h4 id="freeBuffer"><span class="token function">freeBuffer</span>(<span class="nowrap">index: <span class="type token entity">number</span></span>, <span class="nowrap">numConsecutive: <span class="type token entity">number</span></span>): <span class="type token entity">void</span></h4><p class="short-text">Free a previously allocated buffer id.</p><p class="">Note that numChannels is specified when creating the buffer.
</p></div><div class="class-member"><h4 id="freeControlBus"><span class="token function">freeControlBus</span>(<span class="nowrap">index: <span class="type token entity">number</span></span>, <span class="nowrap">numChannels: <span class="type token entity">number</span></span>): <span class="type token entity">void</span></h4><p class="short-text">Free a previously allocated control bus</p><p class="">These require you to remember the channels and it messes it up
if you free it wrong. will change to higher level storage.
</p></div><div class="class-member"><h4 id="getIn"><span class="token function">getIn</span>(<span class="nowrap">keys: <span class="type ">[object Object]</span>[]</span>, <span class="nowrap">notSetValue: <span class="type token entity">any</span></span>): <span class="type token entity">any</span></h4><p class="short-text">Get current state value for the server using an array of keys.</p></div><div class="class-member"><h4 id="mutate"><span class="token function">mutate</span>(<span class="nowrap">key: <span class="type token entity">string</span></span>, <span class="nowrap">fn: <span class="type token entity">any</span></span>): <span class="type token entity">void</span></h4><p class="short-text">Mutate a value or object in the server state.</p></div><div class="class-member"><h4 id="nextNodeID"><span class="token function">nextNodeID</span>(): <span class="type token entity">number</span></h4><p class="short-text">Allocates a node ID to be used for making a synth or group</p></div><div class="class-member"><h4 id="resetState"><span class="token function">resetState</span>(): <span class="type token entity">void</span></h4><p class="short-text">Clear state and reset it to initial empty allocators.</p></div></div></div>
